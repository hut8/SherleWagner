



<div id="side_nav2">
   <div id="prod_header">
    <h4>Products</h4>
</div>

<div class="bs-example">
    <ul >
      <% @filters.each do |filter| %>
      <li id="<%= filter[:filter_name] %>">
          <%= filter[:filter_name] %>
          <% filter[:filter_values].each do |val| %>
          <div class="checkbox">
              <label><input type="checkbox" value="" id="<%= val[:name] %>"> <%= val[:name] %> </label>
          </div>
          <% end %>
      </li>
      <% end %>
  </ul>  

  <script type="text/javascript">
  $(document).ready(function(){

    //      $.ajax({
    //             url: '/j_products',   
    //             success: function(data) {
    //                 jsonproducts = data
    //             console.log(data);
    //             currentData = $.parseJSON(data);


    // }
    // });



checked = []
$('input[type="checkbox"]').click(function(){
    if($(this).prop("checked") == true){
        checked.push(this.id);
                //console.log(this.id+ " is checked");
                
            }
            else if($(this).prop("checked") == false){
                checked.splice((checked.indexOf(this.id)),1);
                //console.log(this.id+" is unchecked.");


// *** to do this in a way that works in ie 8 use the below ****
  //                function remove(arr, item) {
  //     for(var i = arr.length; i--;) {
  //         if(arr[i] === item) {
  //             arr.splice(i, 1);
  //         }
  //     }
  // }
}

if (checked.length > 0){
    $(document.getElementsByClassName("prod_tile")).each(function(i){this.style.display='none';
});
    $(checked).each(function(ind){
        console.log(checked[ind] + "LOOKLOOKATME");

        var checkfilt = checked[ind];

        $(jsonproducts.product_groups).each(function(index){
            var domProd = document.getElementById(this.id);
                        //domProd.style.display = 'none';
                        for (var i = 0; i < this.filters.length; i++) {
                            
                            if (this.filters[i].name == checkfilt){
                                domProd.style.display = 'block';
                                console.log(this.filters[i].name + " " + this.filters[i].name + " ID =" + this.id);

                            }
                        };

                    })
    })
} else {
    $(jsonproducts.product_groups).each(function(index){
        var domProd = document.getElementById(this.id);
        domProd.style.display = 'block';

    });
}
console.log("checked arr:"+ checked);  
});
});
</script>




</div>
</div>
